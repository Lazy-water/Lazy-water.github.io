import{F as K}from"./scroll-view-230f7c68.js";import{c as Q,k as Y,t as p,a as I}from"./helper-1e979f21.js";import{g as U}from"./index-7dbb04b3.js";import{_ as Z}from"./locales-2658cfbc.js";import{B as tt,C as m,y as T,u as V,J as et,q as at,r as R,o as _,a as $,e as v,w as y,F as W,b as lt,i as k,n as j,d as w,t as E,h as it,E as nt,A as B}from"./vue-libs-eb153a24.js";import"./index-edf9a54a.js";const ot=tt({name:Q("Tabs")[0],options:{virtualHost:!0},components:{FanScrollView:K},props:{customStyle:[Object,String],tabs:Array,active:{type:[Number,String],default:0},labelProp:String,labelPad:{type:[Number,String],default:12},sidePad:[String,Number],valueProp:String,scrollThreshold:{type:Number,default:4},offCentering:{type:Number,default:0},shrink:{type:Boolean,default:!1},height:{type:[String,Number],default:40},bg:{type:String,default:"white"},color:{type:String},activeColor:{type:String},activeStrong:{type:Boolean,default:!1},activeStyle:[String,Object],textSize:{type:[String,Number]},activeOut:{type:Boolean,default:!1},indicator:{type:Boolean,default:!0},indicatorHeight:{type:[String,Number],default:2},indicatorWidth:{type:[String,Number],default:"auto"},indicatorLeft:{type:Number,default:0},indicatorColor:String,indicatorStyle:[String,Object],border:{type:[Boolean,String],default:!0,validator:t=>[!0,!1,"bottom","top","vertical"].includes(t)}},emits:["update:active","change","click"],setup(t,c){const o=Y({prefix:"fanTabs"}),b=m(()=>(t.tabs||[]).map((e,l)=>({...typeof e=="object"?e:null,label:t.labelProp?e[t.labelProp]:e,value:t.valueProp?e[t.valueProp]:l}))),a=T([]),r=T(320),i=nt();let s=0;const h=async()=>{s++,b.value.length?a.value=await U({selector:".fan2-tab__in",selectAll:!0,scope:i}):a.value.length&&(a.value=[])},P=async()=>{if(await h(),a.value.length&&s<=2){if(!a.value.filter(n=>n.height===0&&n.width===0).length)return;setTimeout(()=>{h()},300)}const e=await U({selector:"#"+o,scope:i});e!=null&&e.width&&(r.value=e.width+(e.left||0)*2)},q=m(()=>{const e=b.value.findIndex(l=>l.value===t.active);return e!==-1?e:0}),H=m(()=>{const{customStyle:e,height:l,bg:n,color:u,textSize:d,activeColor:S,labelPad:O,sidePad:f}=t,C=p(O),F=f?p(f):`calc(${C} / 2)`;let g=`--fan2-tabs-height:${p(l)};--fan2-tab-pad:${C};--fan2-tabs-side-pad:${F};`;return u&&(g+=`--fan2-tabs-color:${u};`),S&&(g+=`--fan2-tabs-active-color:${S};`),n&&(g+=`background:${n};`),d&&(g+=`font-size:${p(d)};`),I(e)+g}),G=m(()=>I(t.activeStyle)),M=m(()=>{const{indicator:e,indicatorHeight:l,indicatorWidth:n,indicatorColor:u,indicatorStyle:d,activeStrong:S,indicatorLeft:O}=t;if(!e)return"";let f="";const C=a.value[q.value],{left:F=6,width:g=52}=C||{};if(f+=`transform:translateX(${F+g/2-O}px) translateX(calc(-50%));`,n&&(n==="auto"?f+=`width:calc((${g}px - var(--fan2-tab-pad) * 2) * ${S?1.13:1});`:f+=`width:calc(${p(n)} * ${S?1.13:1});`),l){const L=p(l);f+=`height:${L};top:calc(var(--fan2-tabs-height) - ${L});`}return u&&(f+=`background-color:${u};`),I(d)+f}),X=m(()=>["top","vertical"].includes(t.border)),D=m(()=>[!0,"bottom","vertical"].includes(t.border)),z=m(()=>{const e=b.value.length,l=e>t.scrollThreshold;if(e!==a.value.length)return l;const n=a.value.reduce((u,d)=>u+d.width,0);return l&&n>r.value}),A=T(0),J=e=>{var d;if(!z.value)return;const l=a.value[e];if(!l)return;let n=((d=a.value[0])==null?void 0:d.left)||0;n=0;const u=Math.abs(t.offCentering)<1?r.value*t.offCentering:t.offCentering;A.value=l.left-n+l.width/2-r.value/2-u};V(q,e=>{J(e)});const x=e=>{const l=b.value[e];c.emit("click",t.tabs[e],e),l.value!==t.active&&(c.emit("update:active",l.value),c.emit("change",t.tabs[e],e))};return et(()=>P()),V([b,z],()=>{at(P)}),{uniqueId:o,items:b,scrollable:z,scrollLeft:A,theStyle:H,theActiveStyle:G,zsqStyle:M,borderTop:X,borderBottom:D,itemClick:x}}}),rt=["id"],st=w("div",{class:"fan2-tab__pad"},null,-1),ct=["onClick"],ut={class:"fan2-tab__in"},dt={key:0},ft=w("div",{class:"fan2-tab__pad"},null,-1);function vt(t,c,o,b,a,r){const i=R("FanScrollView");return _(),$("div",{id:t.uniqueId,style:k(t.theStyle),class:j(["fan2-tabs",{"fan-hairline--top":t.borderTop,"fan-hairline--bottom":t.borderBottom,"fan2-tabs--flex":!t.scrollable&&!t.shrink,"fan2-tabs--out":t.activeOut}])},[v(i,{"custom-style":"position:relative;",height:"calc(100% + 17px)","scroll-x":!0,"scroll-y":t.activeOut,"scroll-left":t.scrollLeft,"enable-flex":!t.scrollable,scrollable:t.scrollable,scrollWithAnimation:!0,style:k(t.activeOut?{overflow:"visible"}:"")},{default:y(()=>[st,(_(!0),$(W,null,lt(t.items,(s,h)=>(_(),$("div",{key:h,style:k(s.value===t.active?t.theActiveStyle:""),class:j(["fan2-tab",{"fan2-tab--active":s.value===t.active,"fan2-tab--strong":t.activeStrong,"fan2-tab--out":t.activeOut}]),onClick:P=>t.itemClick(h)},[w("div",ut,[t.$slots.default?it(t.$slots,"default",{key:1,item:s,index:h,active:s.value===t.active}):(_(),$("span",dt,E(s.label),1))])],14,ct))),128)),ft,w("div",{style:k(t.zsqStyle),class:"fan2-tabs__indicator"},null,4)]),_:3},8,["scroll-y","scroll-left","enable-flex","scrollable","style"])],14,rt)}const N=Z(ot,[["render",vt]]),St={__name:"index",setup(t){const c=["百度","Google","Bing","百度一下","Bing","Google","百度"],o=T(0);return(b,a)=>{const r=R("demo-block");return _(),$(W,null,[v(r,{title:"基础用法"},{default:y(()=>[v(B(N),{tabs:c.slice(0,4),active:o.value,"onUpdate:active":a[0]||(a[0]=i=>o.value=i),"active-strong":""},null,8,["tabs","active"])]),_:1}),v(r,{title:"收缩布局"},{default:y(()=>[v(B(N),{tabs:c.slice(0,4),active:o.value,"onUpdate:active":a[1]||(a[1]=i=>o.value=i),shrink:"","active-strong":"","active-color":"#111","label-pad":"9px","side-pad":"3px","indicator-width":"20px","indicator-height":"3px","indicator-color":"red"},null,8,["tabs","active"])]),_:1}),v(r,{title:"滚动"},{default:y(()=>[v(B(N),{tabs:c,active:o.value,"onUpdate:active":a[2]||(a[2]=i=>o.value=i),"active-strong":""},null,8,["active"])]),_:1}),v(r,{title:"自定义Tab"},{default:y(()=>[v(B(N),{tabs:c,active:o.value,"onUpdate:active":a[3]||(a[3]=i=>o.value=i),"active-color":"#fff",indicator:!1,"label-pad":"1px"},{default:y(({active:i,item:s})=>[w("div",{style:k(i?{padding:"2px 10px",background:"orange",borderRadius:"20px"}:{padding:"2px 10px"})},E(s.label),5)]),_:1},8,["active"])]),_:1})],64)}}};export{St as default};
