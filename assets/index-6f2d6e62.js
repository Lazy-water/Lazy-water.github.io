import{c as F,a as b}from"./helper-1e979f21.js";import{g as _,a as $}from"./index-5cf139c2.js";import{_ as N}from"./locales-2658cfbc.js";import{B as w,y as c,C as g,u as B,o as p,a as y,d as C,F as z,b as E,n as G,i as I,t as A,r as j,c as D,w as H,e as L,A as O}from"./vue-libs-eb153a24.js";const{env:k}=_(),R=w({name:F("InputGrid")[0],options:{virtualHost:!0},emits:["update:modelValue","input"],props:{customStyle:[String,Object],modelValue:{type:[String,Number],default:""},length:{type:[String,Number],default:6},type:{type:String,default:"text",validator:e=>["text","number","idcard","tel"].includes(e)},gridStyle:String,cursorColor:{type:String,default:"#1677FE"},autoBlur:{type:Boolean,default:!0}},setup(e,{emit:t}){const o=c(""),l=c(!1),i=c(null),d=g(()=>{const r=`${typeof o.value>"u"?"":o.value}`,a=e.length;let s=-1;const m=Array.from({length:a}).map((S,u)=>{const V=r[u]||"";return V===""&&s===-1&&(s=u),V});return r.length>=a&&(s=a-1),{chars:m,index:s}}),n=g(()=>`--fan-grid-cursor-color:${e.cursorColor};${b(e.customStyle)}`),f=g(()=>b(e.gridStyle));B(()=>e.modelValue,r=>{r!==o.value&&(o.value=r)},{immediate:!0}),B(o,r=>{r!==e.modelValue&&t("update:modelValue",r),t("input",r)},{immediate:!0});const h=()=>{l.value=!0},v=()=>{l.value=!1};return{theStyle:n,gridInnerStyle:f,renderValues:d,innerValue:o,focus:l,onFocus:h,onBlur:v,onInput:r=>{const{length:a,type:s,autoBlur:m}=e,S=$(r);let u=String(S);m&&u.length>=a&&(k==="h5"&&i.value.input.blur(),v()),u.length>a&&(u=u.substring(0,a)),u&&(s==="number"||s==="tel")&&(u=isNaN(+u)?"":+u),u!==o.value&&(o.value=u)},boxClick:()=>{k==="h5"&&i.value.input.focus(),l.value?l.value=l.value===1?!0:1:l.value=!0}}}}),U=["type","value","focus","autofocus"];function q(e,t,o,l,i,d){return p(),y("div",{class:"fan-grid-input",style:I(e.theStyle)},[C("input",{ref:"input",class:"fan-grid-input__in",type:e.type,value:e.innerValue,focus:e.focus,autofocus:e.focus,onFocus:t[0]||(t[0]=(...n)=>e.onFocus&&e.onFocus(...n)),onBlur:t[1]||(t[1]=(...n)=>e.onBlur&&e.onBlur(...n)),onInput:t[2]||(t[2]=(...n)=>e.onInput&&e.onInput(...n))},null,40,U),C("div",{class:"fan-flex",onClick:t[3]||(t[3]=(...n)=>e.boxClick&&e.boxClick(...n))},[(p(!0),y(z,null,E(e.renderValues.chars,(n,f)=>(p(),y("div",{key:f,class:G(["fan-grid-input__box",{cursor:e.focus&&f===e.renderValues.index}]),style:I(e.gridInnerStyle)},A(n),7))),128))])],4)}const J=N(R,[["render",q]]),X={__name:"index",setup(e){const t=c(""),o=l=>{console.log(l,t.value)};return(l,i)=>{const d=j("demo-block");return p(),D(d,{title:"基础用法"},{default:H(()=>[L(O(J),{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=n=>t.value=n),onInput:o},null,8,["modelValue"])]),_:1})}}};export{X as default};
