import{c as $}from"./helper-1e979f21.js";import{F as k}from"./picker-d505ce8d.js";import{_ as v}from"./locales-2658cfbc.js";import{B as F,D as x,u as m,r as p,o as h,c as w,O as V,w as y,h as _,y as Y,e as P,A as B}from"./vue-libs-eb153a24.js";import"./popup-0f269fc4.js";import"./overlay-0e43632a.js";import"./text-3debc4c0.js";const T=F({name:$("DatePicker")[0],options:{virtualHost:!0},emits:["update:show","update:modelValue","confirm","cancel"],components:{FanPicker:k},props:{modelValue:{type:Array,default:()=>[]},show:{type:Boolean,default:!1},title:String,minDate:Date,maxDate:Date,filter:{type:[Function,null],default:null},cancelText:{type:String,default:"取消"},confirmText:{type:String,default:"确认"}},setup(e,{emit:a}){const r=x({innerShow:e.show,value:e.modelValue,list:[]}),f=n=>{e.filter?r.list=e.filter(n):r.list=n},s=new Date;let t=s.getFullYear()-10,i=s.getFullYear()+10;const o=(n,u,l,d)=>Array.from({length:n},(b,c)=>({text:c+1<10?`0${c+1}`:String(c+1),id:c+1<10?`0${c+1}`:String(c+1),type:u,children:d?g(t+l,c+1):[]})),D=()=>{if(e.minDate&&(t=e.minDate.getFullYear()),e.maxDate&&(i=e.maxDate.getFullYear()),t>i){const l=i;i=t,t=l}const n=i-t,u=[];for(let l=0;l<=n;l++)u.push({text:String(t+l),id:String(t+l),type:"year",children:o(12,"month",l,!0)});f(u)},g=(n,u)=>{const l=[1,3,5,7,8,10,12],d=[4,6,9,11];return l.includes(u)?o(31,"day"):d.includes(u)?o(30,"day"):n%4===0&&n%100!==0||n%400===0?o(29,"day"):o(28,"day")},S=n=>a("confirm",n),C=()=>a("cancel");return m(e.modelValue,n=>{r.value=[...n]},{deep:!0}),m(()=>r.value,n=>{a("update:modelValue",n)},{deep:!0}),m(()=>e.show,n=>r.innerShow=n),m(()=>r.innerShow,n=>a("update:show",n)),D(),{state:r,onConfirm:S,onCancel:C}}});function A(e,a,r,f,s,t){const i=p("FanPicker");return h(),w(i,{modelValue:e.state.value,"onUpdate:modelValue":a[0]||(a[0]=o=>e.state.value=o),show:e.state.innerShow,"onUpdate:show":a[1]||(a[1]=o=>e.state.innerShow=o),data:e.state.list,"value-key":"id",title:e.title,"cancel-text":e.cancelText,"confirm-text":e.confirmText,onConfirm:e.onConfirm,onCancel:e.onCancel},V({_:2},[e.$slots.default?{name:"header",fn:y(()=>[_(e.$slots,"default")]),key:"0"}:void 0]),1032,["modelValue","show","data","title","cancel-text","confirm-text","onConfirm","onCancel"])}const U=v(T,[["render",A]]),E={__name:"index",setup(e){const a=Y(!0),r=s=>{console.log(s)},f=s=>(s.map(t=>{t.type==="year"?t.text=`${t.text}年`:t.type==="month"?t.text=`${t.text}月`:t.type==="day"&&(t.text=`${t.text}日`),t.children.length&&f(t.children)}),s);return(s,t)=>{const i=p("demo-block");return h(),w(i,{title:"基础用法"},{default:y(()=>[P(B(U),{show:a.value,"onUpdate:show":t[0]||(t[0]=o=>a.value=o),"min-date":new Date,"max-date":new Date,onConfirm:r,filter:f},null,8,["show","min-date","max-date"])]),_:1})}}};export{E as default};
