import{c as R,p as C,a as p}from"./helper-1e979f21.js";import{_ as F}from"./locales-2658cfbc.js";import{B as V,C as S,y as j,u as z,M as O,o as l,a as c,F as k,d as r,t,i as a,f as u,r as A,c as E,w as H,e as U,A as q}from"./vue-libs-eb153a24.js";function G(e,o){return Math.floor(e/1e3)===Math.floor(o/1e3)}function I(e){return setTimeout(e,1e3/60)}function M(e){return I(e)}function T(e){clearTimeout(e)}const J=V({name:R("CountDown")[0],options:{virtualHost:!0},props:{customStyle:[Object,String],time:{type:[String,Number]},autoStart:{type:Boolean,default:!0},separator:{type:String},daySeparator:{type:[String,Object]},separatorStyle:{type:String},blockStyle:{type:String},day:{type:Boolean,default:!1},hour:{type:Boolean,default:!0},minute:{type:Boolean,default:!0},millisecond:{type:[Boolean,String],default:!1},doubleDigitMill:{type:Boolean,default:!1}},emits:["finish"],setup(e,o){const f=S(()=>p(e.customStyle)),m=S(()=>p(e.blockStyle)),h=S(()=>p(e.separatorStyle));let i,d,n=0,B=0;const v=j(C(0)),w=()=>{d=!1,T(i)},y=s=>{n=s,v.value=C(s,e.day),s===0&&(w(),o.emit("finish"))},b=()=>Math.max(B-Date.now(),0),g=()=>{i=M(()=>{y(b()),n!==0&&g()})},D=()=>{i=M(()=>{const s=b();(!G(s,n)||s===0)&&y(s),n!==0&&D()})},N=()=>{e.millisecond?g():D()},$=()=>{d||(d=!0,B=Date.now()+n,N())},_=()=>{w(),e.time&&(n=e.time,y(n),e.autoStart&&$())};return z(()=>e.time,_,{immediate:!0}),O(()=>{T(i),i=null}),{theStyle:f,theBlockStyle:m,theSepStyle:h,timeData:v,reset:_}}});function K(e,o,f,m,h,i){return l(),c("div",{style:a(e.theStyle),class:"fan-flex fan-align-center fan-count-down"},[e.day?(l(),c(k,{key:0},[r("div",{style:a(e.theBlockStyle),class:"fan-count-down__block"},t(e.timeData.days),5),r("div",{style:a(e.theSepStyle),class:"fan-count-down__sep"},t(e.daySeparator?e.daySeparator:"天"),5)],64)):u("v-if",!0),e.hour?(l(),c(k,{key:1},[r("div",{style:a(e.theBlockStyle),class:"fan-count-down__block"},t(e.timeData.hours),5),r("div",{style:a(e.theSepStyle),class:"fan-count-down__sep"},t(e.separator?e.separator:"时"),5)],64)):u("v-if",!0),e.minute?(l(),c(k,{key:2},[r("div",{style:a(e.theBlockStyle),class:"fan-count-down__block"},t(e.timeData.minutes),5),r("div",{style:a(e.theSepStyle),class:"fan-count-down__sep"},t(e.separator?e.separator:"分"),5)],64)):u("v-if",!0),r("div",{style:a(e.theBlockStyle),class:"fan-count-down__block"},t(e.timeData.seconds),5),e.millisecond||!e.separator?(l(),c("div",{key:3,style:a(e.theSepStyle),class:"fan-count-down__sep"},t(e.separator?e.separator:"秒"),5)):u("v-if",!0),e.millisecond?(l(),c("div",{key:4,style:a(e.theBlockStyle),class:"fan-count-down__block"},t(e.doubleDigitMill?"0":"")+t(e.timeData.milliseconds),5)):u("v-if",!0)],4)}const L=F(J,[["render",K]]),X={__name:"index",setup(e){return(o,f)=>{const m=A("demo-block");return l(),E(m,{title:"基础用法"},{default:H(()=>[U(q(L),{time:1e6,millisecond:!0,separator:":"})]),_:1})}}};export{X as default};
