import{c as J,r as C,f as x,a as F,t as o}from"./helper-1e979f21.js";import{_ as O}from"./locales-2658cfbc.js";import{B as T,y as L,C as B,N as D,u as I,J as R,L as W,o as c,a as S,d as w,F as A,b as U,n as q,i as M,t as G,r as K,c as P,w as Q,e as X,A as Y}from"./vue-libs-eb153a24.js";const Z=T({name:J("CountTo")[0],options:{virtualHost:!0},emits:["finish"],props:{customStyle:[String,Object],startNum:{type:[Number,String],default:0},endNum:{type:[Number,String],default:0},step:{type:[Number,String],default:1},speed:{type:[Number,String],default:1},duration:[String,Number],color:String,bg:String,textSize:[String,Number],bold:[String,Number],height:[String,Number],width:[String,Number],symbolWidth:[String,Number],radius:[String,Number],marginRight:[Number,String],lineHeight:[Number,String]},setup(a,{emit:v}){const f=L([0]),s=L(a.startNum),i=L(a.endNum);let y=0,m=!1,l=null;const V=(t,n)=>{var d,b,N,$,_,p,e,z;t=t.split("."),n=n.split(".");const g=String(a.step).split(".");let r=JSON.parse(JSON.stringify(t));const h=Math.max(((d=t[0])==null?void 0:d.length)||0,((b=n[0])==null?void 0:b.length)||0,((N=g[0])==null?void 0:N.length)||0),u=Math.max((($=t[1])==null?void 0:$.length)||0,((_=n[1])==null?void 0:_.length)||0,((p=g[1])==null?void 0:p.length)||0);return y=u,((e=t[0])==null?void 0:e.length)<h&&(r[0]=x(r[0],h)),!t[1]&&u!==0?r[1]=x(0,u):((z=t[1])==null?void 0:z.length)<u&&(r[1]=x(r[1],u,{right:!0})),r.length===2?r.join(".").split(""):r.join("").split("")},j=B(()=>{const t=[];return f.value.forEach(n=>t.push(`transform: translate(0, -${n*10}%)`)),t}),E=B(()=>{const{bg:t,textSize:n,bold:g,color:r,height:h,radius:u,width:d,duration:b,marginRight:N,customStyle:$,symbolWidth:_,lineHeight:p}=a;let e=F($);return t&&(e+=`--fan-count-to-bg: ${t};`),n&&(e+=`--fan-count-to-size: ${o(n)};--fan-count-to-height: ${o(parseFloat(n)*1.4)};`),g&&(e+=`--fan-count-to-weight: ${g};`),r&&(e+=`--fan-count-to-color: ${r};`),u&&(e+=`--fan-count-to-radius: ${o(u)};`),h&&(e+=`--fan-count-to-height: ${o(h)};`),d&&(e+=`--fan-count-to-width: ${o(d)};`),N&&(e+=`--fan-count-to-margin: ${o(N)};`),b&&(e+=`--fan-count-to-duration:${b}s;`),_&&(e+=`--fan-count-to-symbol-width:${o(_)}`),p&&(e+=`--fan-count-to-line-height: ${o(p)}`),F(e)});D(()=>{const t=String(s.value),n=String(i.value);s.value>i.value&&(m=!0),f.value=V(t,n)});const k=()=>{clearInterval(l),l=null,v("finish")},H=()=>{const{step:t,speed:n}=a;Number(s.value)!==Number(i.value)&&(l=setInterval(()=>{if(m){if(s.value=C(Number(s.value)-Number(t),y),Number(s.value)<=Number(i.value))return k()}else if(s.value=C(Number(s.value)+Number(t),y),Number(s.value)>=Number(i.value))return k()},Number(n)*1e3))};return I(()=>a.endNum,t=>i.value=t,{immediate:!0}),I(()=>a.startNum,t=>s.value=t,{immediate:!0}),R(()=>H()),W(()=>clearInterval(l)),{theStyle:E,translateList:j,numList:f}}}),tt={class:"fan-flex fan-align-center"},et=w("span",{class:"number-item_num_box"},[w("span",{class:"number-item_num__txt"},"0123456789")],-1),nt=[et],at={key:1};function st(a,v,f,s,i,y){return c(),S("div",{class:"count-to",style:M(a.theStyle)},[w("div",tt,[(c(!0),S(A,null,U(a.numList,(m,l)=>(c(),S("div",{class:q(["count-to_num",[isNaN(m)?"number_symbol":"number-item"]]),key:l},[isNaN(m)?(c(),S("span",at,G(m),1)):(c(),S("span",{key:0,class:"number-item_num",style:M(a.translateList[l])},nt,4))],2))),128))])],4)}const rt=O(Z,[["render",st]]),lt={__name:"index",setup(a){const v=()=>console.log(11);return(f,s)=>{const i=K("demo-block");return c(),P(i,{title:"基础用法"},{default:Q(()=>[X(Y(rt),{style:{"margin-left":"15px"},"start-num":"10","end-num":"100",onFinish:v})]),_:1})}}};export{lt as default};
