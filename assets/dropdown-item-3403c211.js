import{P as q,L as U,C as m,y as _,E as G,B as E,r as F,o as s,c as k,w as S,h as D,u as J,q as K,j as Q,v as R,a as d,d as c,I as z,n as w,i as N,e as A,F as B,b as I,t as b,f as j}from"./vue-libs-eb153a24.js";import{c as L,b as X,a as Y}from"./helper-1e979f21.js";import{F as Z}from"./scroll-view-230f7c68.js";import{_ as M}from"./locales-2658cfbc.js";function x(e){const o=q(e,null);if(o){const i=G(),{link:p,unlink:h,internalChildren:v}=o;p(i),U(()=>h(i));const a=m(()=>v.indexOf(i));return{parent:o,index:a}}return{parent:null,index:_(-1)}}const ee=E({name:L("DropdownItemContent")[0],options:{virtualHost:!0},components:{FanScrollView:Z},props:{scroll:{type:Boolean,default:!1},scrollHeight:{type:[String,Boolean],default:"61.8vh"}}});function te(e,o,i,p,h,v){const a=F("FanScrollView");return e.scroll?(s(),k(a,{key:0,height:e.scrollHeight,"scroll-y":!0},{default:S(()=>[D(e.$slots,"default")]),_:3},8,["height"])):D(e.$slots,"default",{key:1})}const ne=M(ee,[["render",te]]);const le=E({name:L("DropdownItem")[0],options:{virtualHost:!0},components:{FanIcon:X,DropdownItemContent:ne},props:{contentStyle:[String,Object],title:String,modelValue:{type:[Number,String],default:0},active:Boolean,icon:{type:[String,Boolean],default:""},iconSize:{type:[String,Number],default:"12px"},options:{type:Array,default:()=>[]},titleProp:{type:String,default:"text"},valueProp:{type:String,default:"value"},disabled:{type:Boolean,default:!1},scroll:{type:Boolean,default:!1},scrollHeight:{type:String,default:"61.8vh"},customContent:{type:Boolean,default:!1}},expose:["toggle"],emits:["update:modelValue","change","update:title"],setup(e,o){const i=_(),p=m(()=>{let t=e.icon!==!1?e.icon||"caret-down":"";return t==="caret-down"&&i.value&&(t="caret-up"),{name:t,color:e.active||i.value||e.icon?"currentColor":"rgba(0,0,0,0.1)"}}),h=m(()=>Y(e.contentStyle)),v=(t,l,u)=>t!=null&&t.length?t.map((f,y)=>({title:l?f[l]:f,value:u?f[u]:y,children:v(f.children,l,u)})):null,a=m(()=>{const{options:t,titleProp:l,valueProp:u}=e;return v(t,l,u)||[]}),g=m(()=>a.value.some(t=>t.children)),n=_(0),r=t=>{var f;if(typeof t<"u"){n.value=t;return}if(!g.value)return;const l=a.value.find(y=>{var O;return(O=y.children)!=null&&O.length?y.children.some(W=>W.value===e.modelValue):y.value===e.modelValue}),u=l?l.value:((f=a.value[0])==null?void 0:f.value)||0;n.value!==u&&(n.value=u)};J(()=>e.modelValue,t=>r(t),{immediate:!0});const C=m(()=>{const t=a.value.find(l=>l.value===n.value);return(t==null?void 0:t.children)||[]}),{parent:P}=x("fanDropdownMenu"),T=m(()=>`top:${P.offset.value}px;`),$=_(!1),V=_(!1),H=(t=!i.value,l)=>{e.disabled||!o.slots.default&&!e.customContent&&!a.value.length||t===i.value||(i.value=t,t&&(r(),$.value=!0,(typeof(l==null?void 0:l.immediateBg)>"u"||!l.immediateBg)&&(V.value=!0),setTimeout(()=>{$.value=!1,V.value=!1},1e3/60)))};return{theIcon:p,showWrapper:i,theContentStyle:h,offsetStyle:T,animateContent:$,animateBg:V,theOptions:a,column2:g,column2Options:C,column1Active:n,toggle:H,emptyFunc:()=>null,itemClick:t=>{const l=t.value;if(t.children){r(l);return}l!==e.modelValue&&(o.emit("update:modelValue",l),K(()=>{o.emit("update:title",t.title),o.emit("change",l,t)})),H()}}}}),oe={class:"fan-dropdown-item"},ae={key:0,class:"fan-flex"},ie={class:"fan-dropdown-item__col1"},se=["onClick"],re={class:"fan-flex-1 fan-ellipsis"},ce={class:"fan-dropdown-item__col2"},ue=["onClick"],de={class:"fan-flex-1 fan-ellipsis"},fe=["onClick"],me={class:"fan-flex-1 fan-ellipsis"};function ve(e,o,i,p,h,v){const a=F("DropdownItemContent"),g=F("FanIcon");return Q((s(),d("div",oe,[c("div",{class:"fan-dropdown-item__overlay",onClick:o[0]||(o[0]=z(n=>e.toggle(!1),["stop"]))}),c("div",{style:N(e.offsetStyle),class:"fan-dropdown-item__main"},[c("div",{class:w(["fan-dropdown-item__bg",{"fan-dropdown--fade":e.animateBg}]),onClick:o[1]||(o[1]=z(n=>e.toggle(!1),["stop"]))},null,2),c("div",{style:N(e.theContentStyle),class:w(["fan-dropdown-item__content",{"fan-dropdown--slide":e.animateContent}])},[e.column2?(s(),d("div",ae,[c("div",ie,[A(a,{scroll:e.scroll,"scroll-height":e.scrollHeight},{default:S(()=>[(s(!0),d(B,null,I(e.theOptions,(n,r)=>(s(),d("div",{key:r,class:w(["fan-dropdown-item__cell",{"fan-dropdown-item--active":e.column1Active===n.value}]),onClick:C=>e.itemClick(n)},[c("div",re,b(n.title),1)],10,se))),128))]),_:1},8,["scroll","scroll-height"])]),c("div",ce,[A(a,{scroll:e.scroll,"scroll-height":e.scrollHeight},{default:S(()=>[(s(!0),d(B,null,I(e.column2Options,(n,r)=>(s(),d("div",{key:r,class:w(["fan-hairline--bottom fan-dropdown-item__cell",{"fan-dropdown-item--active":e.modelValue===n.value}]),onClick:C=>e.itemClick(n)},[c("div",de,b(n.title),1),e.modelValue===n.value?(s(),k(g,{key:0,name:"check-circle-fill",color:"var(--fan-dropdown-active-color)",size:"18px"})):j("v-if",!0)],10,ue))),128))]),_:1},8,["scroll","scroll-height"])])])):(s(),k(a,{key:1,scroll:e.scroll,"scroll-height":e.scrollHeight},{default:S(()=>[(s(!0),d(B,null,I(e.theOptions,(n,r)=>(s(),d("div",{key:r,class:w(["fan-hairline--bottom fan-dropdown-item__cell",{"fan-dropdown-item--active":e.modelValue===n.value}]),onClick:C=>e.itemClick(n)},[c("div",me,b(n.title),1),e.modelValue===n.value?(s(),k(g,{key:0,name:"check-circle-fill",color:"var(--fan-dropdown-active-color)",size:"18px"})):j("v-if",!0)],10,fe))),128))]),_:1},8,["scroll","scroll-height"])),D(e.$slots,"default")],6)],4)],512)),[[R,e.showWrapper]])}const Ce=M(le,[["render",ve]]);export{Ce as D};
