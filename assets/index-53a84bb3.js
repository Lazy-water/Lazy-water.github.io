import{c as z,k as B,a as I,F as c}from"./helper-1e979f21.js";import{g as u,a as E}from"./index-7dbb04b3.js";import{u as F}from"./index-410638db.js";import{_ as q}from"./locales-2658cfbc.js";import{B as D,D as P,u as w,C as $,o as b,a as v,d as _,h as V,i as k,n as j,E as C,r as A,e as s,w as i,A as p,g as h}from"./vue-libs-eb153a24.js";import"./index-edf9a54a.js";const H=D({name:z("Sticky")[0],options:{virtualHost:!0},props:{customStyle:[Object,String],offsetTop:{type:Number,default:0},zIndex:{type:Number,default:99},container:{type:Function},scrollTop:{type:Number,default:null}},emits:["change"],setup(t,l){const e=P({width:0,height:0,fixed:!1,transform:0}),d=B({prefix:"fanSticky"}),f=C(),{onPageScroll:a}=F(),y="#"+d,g=()=>{const{container:o,offsetTop:r}=t;if(typeof o=="function"){Promise.all([u({selector:y,scope:f}),u({el:o()})]).then(([n,x])=>{e.height=n.height,e.width=n.width,e.fixed=r>n.top&&x.bottom>0;const S=x.bottom-r-e.height;e.transform=S<0?S:0});return}u({selector:y,scope:f}).then(n=>{n&&(r>=n.top?(e.fixed=!0,e.height=n.height,e.width=n.width):e.fixed=!1)})};a(o=>{t.scrollTop==null&&g()}),w(()=>t.scrollTop,o=>o!==null&&g(),{immediate:!0}),w(()=>e.fixed,o=>{l.emit("change",{fixed:o})});const N=$(()=>e.fixed?`width:${e.width}px;height:${e.height}px;`:""),T=$(()=>{let o="";if(e.transform&&(o+=`transform:translate3d(0,${e.transform}px,0);`),!e.fixed)return o;const{offsetTop:r,zIndex:n}=t;return o+=`width:${e.width}px;height:${e.height}px;top:${r+"px"};z-index:${n};${I(t.customStyle)}`,o});return{uniqueId:d,state:e,wrapperStyle:N,theStyle:T}}}),L=["id"];function O(t,l,e,d,f,a){return b(),v("div",{id:t.uniqueId,style:k(t.wrapperStyle)},[_("div",{style:k(t.theStyle),class:j(["fan-sticky",{"fan-sticky--fixed":t.state.fixed}])},[V(t.$slots,"default")],6)],12,L)}const m=q(H,[["render",O]]),U={style:{height:"300vh",background:"linear-gradient(to bottom, #fff, #999)"}},G={id:"fanStickyDemoContainer",style:{width:"120px",height:"200px",border:"1px solid red"}},J=_("div",{style:{height:"20px"}},null,-1),Z={__name:"index",setup(t){const l=C(),e=()=>E("#fanStickyDemoContainer",{scope:l});return(d,f)=>{const a=A("demo-block");return b(),v("main",U,[s(a,{title:"基础用法"},{default:i(()=>[s(p(m),null,{default:i(()=>[s(c,null,{default:i(()=>[h("按钮一枚")]),_:1})]),_:1})]),_:1}),s(p(m),{"offset-top":40},{default:i(()=>[s(a,{title:"吸顶距离",style:{"padding-left":"120px"}},{default:i(()=>[s(c,null,{default:i(()=>[h("按钮一枚")]),_:1})]),_:1})]),_:1}),s(a,{title:"指定容器",style:{"padding-left":"240px"}},{default:i(()=>[_("div",G,[J,s(p(m),{container:e},{default:i(()=>[s(c,null,{default:i(()=>[h("按钮一枚")]),_:1})]),_:1})])]),_:1})])}}};export{Z as default};
